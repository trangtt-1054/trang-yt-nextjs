{"ast":null,"code":"var _jsxFileName = \"/Users/tranthutrang/Desktop/trang-yt-nextjs/src/pages/[date]/[id].tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from 'next/router';\nimport { useState, useEffect } from 'react';\nexport default function User({\n  res\n}) {\n  const router = useRouter();\n  const {\n    0: item,\n    1: setItem\n  } = useState(res);\n  useEffect(() => {\n    async function loadData() {\n      const response = await fetch(`https://api.spacexdata.com/v3/history/${router.query.id}`);\n      const res2 = await response.json();\n      setItem(res2);\n    }\n\n    if (!res) loadData(); //ở client side, nếu res chưa có thì gọi api trên, nếu res đã có từ lần gọi trước rồi thì skip ko gọi loadData nữa\n  }, []);\n  if (!item) return __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 21\n    }\n  }, \"Loading...\");\n  return __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 10\n    }\n  }, item === null || item === void 0 ? void 0 : item.details);\n}\n\nUser.getInitialProps = async ctx => {\n  //if we are in client side, (res & req only available in server side) instead of calling the API before navigating to next page, we JUST navigate and then we can use similar code with useState, useEffect in order to fetch data in client-side\n  if (!ctx.req) {\n    return {\n      res: null\n    };\n  }\n\n  const {\n    query\n  } = ctx;\n  const response = await fetch(`https://api.spacexdata.com/v3/history/${query.id}`);\n  const res = await response.json();\n  return {\n    res\n  };\n};","map":{"version":3,"sources":["/Users/tranthutrang/Desktop/trang-yt-nextjs/src/pages/[date]/[id].tsx"],"names":["useRouter","useState","useEffect","User","res","router","item","setItem","loadData","response","fetch","query","id","res2","json","details","getInitialProps","ctx","req"],"mappings":";;;AAAA,SAASA,SAAT,QAA0B,aAA1B;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAQA,eAAe,SAASC,IAAT,CAAc;AAAEC,EAAAA;AAAF,CAAd,EAAkC;AAC/C,QAAMC,MAAM,GAAGL,SAAS,EAAxB;AACA,QAAM;AAAA,OAACM,IAAD;AAAA,OAAOC;AAAP,MAAkBN,QAAQ,CAACG,GAAD,CAAhC;AACAF,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAeM,QAAf,GAA0B;AACxB,YAAMC,QAAQ,GAAG,MAAMC,KAAK,CACzB,yCAAwCL,MAAM,CAACM,KAAP,CAAaC,EAAG,EAD/B,CAA5B;AAGA,YAAMC,IAA8B,GAAG,MAAMJ,QAAQ,CAACK,IAAT,EAA7C;AACAP,MAAAA,OAAO,CAACM,IAAD,CAAP;AACD;;AACD,QAAI,CAACT,GAAL,EAAUI,QAAQ,GARJ,CAQQ;AACvB,GATQ,EASN,EATM,CAAT;AAUA,MAAI,CAACF,IAAL,EAAW,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAP;AACX,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKA,IAAL,aAAKA,IAAL,uBAAKA,IAAI,CAAES,OAAX,CAAP;AACD;;AASDZ,IAAI,CAACa,eAAL,GAAuB,MAAOC,GAAP,IAAkC;AACvD;AACA,MAAI,CAACA,GAAG,CAACC,GAAT,EAAc;AACZ,WAAO;AAAEd,MAAAA,GAAG,EAAE;AAAP,KAAP;AACD;;AACD,QAAM;AAAEO,IAAAA;AAAF,MAAYM,GAAlB;AACA,QAAMR,QAAQ,GAAG,MAAMC,KAAK,CACzB,yCAAwCC,KAAK,CAACC,EAAG,EADxB,CAA5B;AAGA,QAAMR,GAA6B,GAAG,MAAMK,QAAQ,CAACK,IAAT,EAA5C;AACA,SAAO;AAAEV,IAAAA;AAAF,GAAP;AACD,CAXD","sourcesContent":["import { useRouter } from 'next/router';\nimport { useState, useEffect } from 'react';\nimport { HistoryEvent } from '../../../api/HistoryEvent';\nimport { NextPageContext } from 'next';\n\nexport interface UserProps {\n  res: HistoryEvent | undefined;\n}\n\nexport default function User({ res }: UserProps) {\n  const router = useRouter();\n  const [item, setItem] = useState(res);\n  useEffect(() => {\n    async function loadData() {\n      const response = await fetch(\n        `https://api.spacexdata.com/v3/history/${router.query.id}`\n      );\n      const res2: HistoryEvent | undefined = await response.json();\n      setItem(res2);\n    }\n    if (!res) loadData(); //ở client side, nếu res chưa có thì gọi api trên, nếu res đã có từ lần gọi trước rồi thì skip ko gọi loadData nữa\n  }, []);\n  if (!item) return <p>Loading...</p>;\n  return <h2>{item?.details}</h2>;\n}\n\ninterface MyNextPageContext extends NextPageContext {\n  query: {\n    date: string;\n    id: string;\n  };\n}\n\nUser.getInitialProps = async (ctx: MyNextPageContext) => {\n  //if we are in client side, (res & req only available in server side) instead of calling the API before navigating to next page, we JUST navigate and then we can use similar code with useState, useEffect in order to fetch data in client-side\n  if (!ctx.req) {\n    return { res: null };\n  }\n  const { query } = ctx;\n  const response = await fetch(\n    `https://api.spacexdata.com/v3/history/${query.id}`\n  );\n  const res: HistoryEvent | undefined = await response.json();\n  return { res };\n};\n"]},"metadata":{},"sourceType":"module"}