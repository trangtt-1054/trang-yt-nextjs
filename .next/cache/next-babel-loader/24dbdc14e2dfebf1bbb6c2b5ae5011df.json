{"ast":null,"code":"var _jsxFileName = \"/Users/tranthutrang/Desktop/trang-yt-nextjs/src/pages/[date]/[id].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from 'next/router';\nimport { useState, useEffect } from 'react';\nexport default function User({\n  res\n}) {\n  console.log(res);\n  const router = useRouter(); // return (\n  //   <div>\n  //     <h2>{res && res.title}</h2>\n  //     <p>{res && res.details}</p>\n  //   </div>\n  // );\n\n  const {\n    0: item,\n    1: setItem\n  } = useState(res);\n  useEffect(() => {\n    console.log('useEffect running');\n\n    async function loadData() {\n      console.log('loadData running');\n      const response = await fetch(`https://api.spacexdata.com/v3/history/${router.query.id}`);\n      const res = await response.json();\n      setItem(res);\n    }\n\n    if (!res) loadData(); //ở client side, nếu res chưa có thì gọi api trên, nếu res đã có từ lần gọi trước rồi thì skip ko gọi loadData nữa\n  }, []);\n  if (!res) return __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 20\n    }\n  }, \"Loading...\");\n  return __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 10\n    }\n  }, item === null || item === void 0 ? void 0 : item.details);\n}\n\nUser.getInitialProps = async ctx => {\n  //if we are in client side, (res & req only available in server side) instead of calling the API before navigating to next page, we JUST navigate and then we can use similar code with useState, useEffect in order to fetch data in client-side\n  if (!ctx.req) {\n    return {\n      res: null\n    };\n  }\n\n  const {\n    query\n  } = ctx;\n  const response = await fetch(`https://api.spacexdata.com/v3/history/${query.id}`);\n  const res = await response.json();\n  return {\n    res\n  };\n};","map":{"version":3,"sources":["/Users/tranthutrang/Desktop/trang-yt-nextjs/src/pages/[date]/[id].js"],"names":["useRouter","useState","useEffect","User","res","console","log","router","item","setItem","loadData","response","fetch","query","id","json","details","getInitialProps","ctx","req"],"mappings":";;;AAAA,SAASA,SAAT,QAA0B,aAA1B;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,eAAe,SAASC,IAAT,CAAc;AAAEC,EAAAA;AAAF,CAAd,EAAuB;AACpCC,EAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,QAAMG,MAAM,GAAGP,SAAS,EAAxB,CAFoC,CAGpC;AACA;AACA;AACA;AACA;AACA;;AACA,QAAM;AAAA,OAACQ,IAAD;AAAA,OAAOC;AAAP,MAAkBR,QAAQ,CAACG,GAAD,CAAhC;AACAF,EAAAA,SAAS,CAAC,MAAM;AACdG,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;;AACA,mBAAeI,QAAf,GAA0B;AACxBL,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA,YAAMK,QAAQ,GAAG,MAAMC,KAAK,CACzB,yCAAwCL,MAAM,CAACM,KAAP,CAAaC,EAAG,EAD/B,CAA5B;AAGA,YAAMV,GAAG,GAAG,MAAMO,QAAQ,CAACI,IAAT,EAAlB;AACAN,MAAAA,OAAO,CAACL,GAAD,CAAP;AACD;;AACD,QAAI,CAACA,GAAL,EAAUM,QAAQ,GAVJ,CAUQ;AACvB,GAXQ,EAWN,EAXM,CAAT;AAYA,MAAI,CAACN,GAAL,EAAU,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAP;AACV,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKI,IAAL,aAAKA,IAAL,uBAAKA,IAAI,CAAEQ,OAAX,CAAP;AACD;;AAEDb,IAAI,CAACc,eAAL,GAAuB,MAAOC,GAAP,IAAe;AACpC;AACA,MAAI,CAACA,GAAG,CAACC,GAAT,EAAc;AACZ,WAAO;AAAEf,MAAAA,GAAG,EAAE;AAAP,KAAP;AACD;;AACD,QAAM;AAAES,IAAAA;AAAF,MAAYK,GAAlB;AACA,QAAMP,QAAQ,GAAG,MAAMC,KAAK,CACzB,yCAAwCC,KAAK,CAACC,EAAG,EADxB,CAA5B;AAGA,QAAMV,GAAG,GAAG,MAAMO,QAAQ,CAACI,IAAT,EAAlB;AACA,SAAO;AAAEX,IAAAA;AAAF,GAAP;AACD,CAXD","sourcesContent":["import { useRouter } from 'next/router';\nimport { useState, useEffect } from 'react';\n\nexport default function User({ res }) {\n  console.log(res);\n  const router = useRouter();\n  // return (\n  //   <div>\n  //     <h2>{res && res.title}</h2>\n  //     <p>{res && res.details}</p>\n  //   </div>\n  // );\n  const [item, setItem] = useState(res);\n  useEffect(() => {\n    console.log('useEffect running');\n    async function loadData() {\n      console.log('loadData running');\n      const response = await fetch(\n        `https://api.spacexdata.com/v3/history/${router.query.id}`\n      );\n      const res = await response.json();\n      setItem(res);\n    }\n    if (!res) loadData(); //ở client side, nếu res chưa có thì gọi api trên, nếu res đã có từ lần gọi trước rồi thì skip ko gọi loadData nữa\n  }, []);\n  if (!res) return <p>Loading...</p>;\n  return <h2>{item?.details}</h2>;\n}\n\nUser.getInitialProps = async (ctx) => {\n  //if we are in client side, (res & req only available in server side) instead of calling the API before navigating to next page, we JUST navigate and then we can use similar code with useState, useEffect in order to fetch data in client-side\n  if (!ctx.req) {\n    return { res: null };\n  }\n  const { query } = ctx;\n  const response = await fetch(\n    `https://api.spacexdata.com/v3/history/${query.id}`\n  );\n  const res = await response.json();\n  return { res };\n};\n"]},"metadata":{},"sourceType":"module"}